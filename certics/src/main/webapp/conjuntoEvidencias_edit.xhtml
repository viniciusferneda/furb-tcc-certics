<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" template="/template/main.xhtml">

	<ui:define name="body">
		<h:form id="formRegistroEvidencias"> 
			<p:layout id="layoutRegistroEvidencias" style="width:100%;height:100%">
				<p:layoutUnit id="informacoesAvalicao" position="north" style="width:100%;height:100%">
					<h:outputLabel value="#{messages['conjuntoEvidencias.label.id']}: " for="id" styleClass="text-input" />
					<h:outputText id="id" value="#{conjuntoEvidenciasEditMB.bean.id}" />
					<p:message for="id" />
	
					<h:outputLabel value="#{messages['software.label.nome']}: " for="softwareNome" styleClass="text-input" />
					<h:outputText id="softwareNome" value="#{conjuntoEvidenciasEditMB.bean.software.nome}" />
					<p:message for="softwareNome" />
				</p:layoutUnit>
				
				<p:layoutUnit id="treeRegistroEvidencias" position="west" resizable="true" size="20%">
					<p:tree id="tree" value="#{conjuntoEvidenciasEditMB.root}" var="node" dynamic="true" cache="false" 
	            		selectionMode="single" selection="#{conjuntoEvidenciasEditMB.selectedNode}" style="width:100%;height:100%">
				        
				        <p:ajax event="select" listener="#{conjuntoEvidenciasEditMB.onNodeSelect}" update=":formRegistroEvidencias:dtEvidencias"/>
				        
				        <p:treeNode id="treeNode">
				            <h:outputText id="lblNode" value="#{node.titulo}"/>
				        </p:treeNode>
				    </p:tree>	
				</p:layoutUnit>
				
				<p:layoutUnit id="principalRegistroEvidencia" position="center" size="80%" >
				
					<h:outputLabel value="#{messages['conjuntoEvidencias.label.pontuacao']}: " styleClass="text-input" />
					<p:selectOneMenu id="pontuacao" effect="fade" value="#{conjuntoEvidenciasEditMB.bean.conjuntoEvidenciasAux.pontuacao}">
						<f:selectItems value="#{conjuntoEvidenciasEditMB.pontuacao}" />
					</p:selectOneMenu>

					<h:outputLabel value="#{messages['conjuntoEvidencias.label.comentario']}: " for="conjuntoEvidenciasComentario" styleClass="text-input" />
					<h:inputText id="conjuntoEvidenciasComentario" value="#{conjuntoEvidenciasEditMB.bean.conjuntoEvidenciasAux.comentario}" title="#{messages['conjuntoEvidencias.alt.comentario']}" />
					<p:message for="conjuntoEvidenciasComentario" />

					<p:commandButton value="#{messages['button.new']}" 
						immediate="true"
						actionListener="setNovaRespostaEvidencia()"
						update=":formRegistroEvidencias:panelRegistroEvidencia" 
						oncomplete="dialogEvidencia.show()"/>
	
					<p:dataTable id="dtEvidencias" var="evidencias" value="#{conjuntoEvidenciasEditMB.lRespostaEvidencias}">
						<f:facet name="header">
							#{messages['evidenciaEntity.label']}
						</f:facet>
						
						<p:column>
							<h:outputText id="evidenciasNome" value="#{evidencias.evidencia.nome}"/>
						</p:column>
						
						<p:column>
							<h:outputText id="evidenciasAbrangencia" value="#{evidencias.abrangencia}"/>
						</p:column>
							
						<p:column>
							<h:outputText id="evidenciasContribuicao" value="#{evidencias.contribuicao}"/>
						</p:column>
						
						<p:column>
							<h:outputText id="evidenciasMotivo" value="#{evidencias.motivo}"/>
						</p:column>
					</p:dataTable>
				</p:layoutUnit>
			</p:layout>
			
			<p:dialog id="modalEvidencia"
				header="Registrar evidÃªncia" 
				widgetVar="dialogEvidencia" 
				width="400" height="400"
				resizable="false"
				closable="true">  
		  		<h:panelGrid id="panelRegistroEvidencia" styleClass="semBorda">
		
					<h:outputLabel value="#{messages['evidenciaEntity.label']}: " for="evidencia" styleClass="text-input" />
				    <p:selectOneMenu id="evidencia" value="#{conjuntoEvidenciasEditMB.bean.respostaEvidenciaAux.evidencia}" effect="fade" converter="ConversorEvidencia">
						<f:selectItem itemLabel="Selecione" itemValue="" />
						<f:selectItems value="#{conjuntoEvidenciasEditMB.evidenciaList}" var="varEvidencia" itemLabel="#{varEvidencia.label}" itemValue="#{varEvidencia}" />						
					</p:selectOneMenu>
					<p:message for="evidencia" />
		
					<h:outputLabel value="#{messages['respostaEvidencia.label.abrangencia']}: " for="abrangencia" styleClass="text-input" />
					<h:inputText id="abrangencia" value="#{conjuntoEvidenciasEditMB.bean.respostaEvidenciaAux.abrangencia}" title="#{messages['respostaEvidencia.alt.abrangencia']}" />
					<p:message for="abrangencia" />
		
					<h:outputLabel value="#{messages['respostaEvidencia.label.motivo']}: " for="motivo" styleClass="text-input" />
					<h:inputText id="motivo" value="#{conjuntoEvidenciasEditMB.bean.respostaEvidenciaAux.motivo}" title="#{messages['respostaEvidencia.alt.motivo']}" />
					<p:message for="motivo" />
		
					<h:outputLabel value="#{messages['respostaEvidencia.label.contribuicao']}: " for="contribuicao" styleClass="text-input" />
					<h:inputText id="contribuicao" value="#{conjuntoEvidenciasEditMB.bean.respostaEvidenciaAux.contribuicao}" title="#{messages['respostaEvidencia.alt.contribuicao']}" />
					<p:message for="contribuicao" />
		
					<p:commandButton value="#{messages['button.save']}"
						actionListener="#{conjuntoEvidenciasEditMB.addRespostaEvidencia()}"
						update=":formRegistroEvidencias:dtEvidencias"
						oncomplete="dialogEvidencia.hide();"/>
				</h:panelGrid>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>